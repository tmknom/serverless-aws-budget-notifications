service: serverless-budget-notifications

frameworkVersion: '>=1.28.0 <2.0.0'

provider:
  name: aws
  runtime: go1.x
  region: ap-northeast-1
  stackName: ${self:service}
  iamRoleStatements:
    - Effect: 'Allow'
      Action: 'budgets:ViewBudget'
      Resource: '*'

package:
  exclude:
    - ./**
  include:
    - ./bin/**

functions:
  slack:
    handler: bin/main
    name: ${self:service}
    environment:
      SLACK_INCOMING_WEBHOOK_URL: ${env:SLACK_INCOMING_WEBHOOK_URL}
      BUDGET_NAME: ${env:BUDGET_NAME}
    events:
      - schedule: cron(30 9 * * ? *)
